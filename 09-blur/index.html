<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>模糊算法 · 图像处理知识库</title>
<link rel="stylesheet" href="../assets/style.css">
<style>
:root{--accent:#a8c98a;}
.card::before{background:var(--accent);}
.section h2{color:var(--accent);}
.compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:20px 0;}
.compare-box{
  background:var(--surface);border:1px solid var(--border2);
  border-radius:2px;padding:16px;
}
.compare-title{font-size:13px;font-weight:600;color:var(--text);margin-bottom:10px;}
.pixel-row{
  display:flex;gap:4px;margin:16px 0;align-items:center;
  font-family:'JetBrains Mono',monospace;font-size:12px;
}
.px{
  width:36px;height:36px;border-radius:2px;
  display:flex;align-items:center;justify-content:center;
  font-size:10px;color:rgba(255,255,255,0.7);
  border:1px solid var(--border2);
}
</style>
</head>
<body>
<nav class="nav">
  <a href="../index.html" class="nav-home">知识库主页</a>
  <div class="nav-sep"></div>
  <div class="nav-title">Layer 02 · 经典图像处理算法</div>
</nav>
<main class="main">
  <div class="page-header">
    <div class="page-eyebrow">LAYER 02 · 02 · BLUR</div>
    <h1 class="page-title"><em>模糊算法</em></h1>
    <p class="page-desc">均值模糊和高斯模糊的原理与区别。模糊的本质是让每个像素向周围像素靠近，卷积核决定靠近的方式。</p>
    <div class="page-header-line"></div>
  </div>

  <div class="section">
    <div class="section-label">BLUR ESSENCE</div>
    <h2>模糊的本质</h2>
    <p>图像里有一个亮点，周围都是暗的，对比非常强烈。模糊之后，亮点的值被周围暗像素稀释变低，同时周围暗像素被亮点带高，原来孤立的亮点变成柔和的光晕，这就是模糊的视觉效果。</p>
    <p><strong>模糊 = 让每个像素的值向周围像素靠近，卷积核决定靠近的方式。</strong></p>
  </div>

  <div class="section">
    <div class="section-label">MEAN BLUR</div>
    <h2>均值模糊</h2>
    <p>对周围所有像素一视同仁，取简单平均值。卷积核全部是 1/9，总和为1。</p>

    <div class="code-block">
      <div class="code-label">均值模糊核 3×3</div>
      <pre>1/9  1/9  1/9
1/9  1/9  1/9
1/9  1/9  1/9</pre>
    </div>

    <div class="data-box">
      <div class="data-label">完整演算 · 原图中间200，周围全是10</div>
      <pre>
原图：
10  10  10  10  10
10  10  10  10  10
10  10 200  10  10
10  10  10  10  10
10  10  10  10  10

均值模糊后（3×3内包含200的位置全部变成31）：
10  10  10  10  10
10  31  31  31  10
10  31  31  31  10
10  31  31  31  10
10  10  10  10  10

原因：只要3×3范围包含200，总和都是 200+10×8=280，280÷9≈31
完全不包含200的位置保持10不变</pre>
    </div>

    <div class="insight">
      <div class="insight-label">均值模糊的缺点</div>
      <p>从10直接跳到31，没有过渡，模糊边界生硬。因为所有包含200的位置结果完全相同，不包含200的位置完全不变，没有平滑的渐变。</p>
    </div>
  </div>

  <div class="section">
    <div class="section-label">GAUSSIAN BLUR</div>
    <h2>高斯模糊</h2>
    <p>按距离分配权重，离当前像素越近影响越大，越远影响越小。权重分布是高斯函数（正态分布），所以叫高斯模糊。</p>

    <div class="code-block">
      <div class="code-label">高斯核 3×3（归一化前）</div>
      <pre>1  2  1
2  4  2
1  2  1
总和 = 16，计算时每个数除以16</pre>
    </div>

    <div class="data-box">
      <div class="data-label">完整演算 · 对各位置计算</div>
      <pre>
200本身（中心）：
(10×1+10×2+10×1 + 10×2+200×4+10×2 + 10×1+10×2+10×1) ÷ 16
= (10+20+10 + 20+800+20 + 10+20+10) ÷ 16
= 920 ÷ 16 = 57.5 ≈ 58

紧邻200的10（正右方）：
(10×1+10×2+10×1 + 200×2+10×4+10×2 + 10×1+10×2+10×1) ÷ 16
= (10+20+10 + 400+40+20 + 10+20+10) ÷ 16
= 540 ÷ 16 ≈ 34

斜角的10（右下角）：
(200×1+10×2+10×1 + 10×2+10×4+10×2 + 10×1+10×2+10×1) ÷ 16
= (200+20+10 + 20+40+20 + 10+20+10) ÷ 16
= 350 ÷ 16 ≈ 22</pre>
    </div>

    <div class="compare-grid">
      <div class="compare-box">
        <div class="compare-title" style="color:var(--muted2)">均值模糊结果</div>
        <div style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--muted2);line-height:2">
          包含200的位置：全部 31<br>
          不含200的位置：全部 10<br>
          <span style="color:var(--c5)">无过渡，边界生硬</span>
        </div>
      </div>
      <div class="compare-box">
        <div class="compare-title" style="color:var(--accent)">高斯模糊结果</div>
        <div style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--muted2);line-height:2">
          200本身：58<br>
          紧邻的10：34<br>
          斜角的10：22<br>
          远处的10：10<br>
          <span style="color:var(--accent)">平滑过渡，效果自然</span>
        </div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-label">CODE</div>
    <h2>OpenCV 代码</h2>
    <div class="code-block">
      <div class="code-label">PYTHON · OPENCV</div>
      <pre>import cv2

img = cv2.imread("photo.jpg")

# 均值模糊，核大小 5×5
blur_mean = cv2.blur(img, (5, 5))

# 高斯模糊，核大小 15×15，sigma自动计算
blur_gaussian = cv2.GaussianBlur(img, (15, 15), 0)

# 核越大，模糊程度越强
# 核大小必须是奇数：3,5,7,9,11...</pre>
    </div>
  </div>

  <div class="resources">
    <div class="resources-header"><h2>推荐学习资料</h2></div>
    <div class="resource-grid">
      <a href="https://docs.opencv.org/4.x/d4/d13/tutorial_py_filtering.html" target="_blank" class="resource-item">
        <div class="resource-type">官方教程 · OPENCV</div>
        <div class="resource-title">Smoothing Images</div>
        <div class="resource-desc">OpenCV 官方模糊教程，包含均值、高斯、中值、双边滤波对比</div>
      </a>
      <a href="https://homepages.inf.ed.ac.uk/rbf/HIPR2/gsmooth.htm" target="_blank" class="resource-item">
        <div class="resource-type">技术文档</div>
        <div class="resource-title">Gaussian Smoothing</div>
        <div class="resource-desc">高斯模糊详细技术文档，包含 sigma 参数对效果的影响</div>
      </a>
    </div>
  </div>

  <div class="bottom-nav">
    <a href="../08-convolution/index.html" class="btn-nav">← 卷积核</a>
    <a href="../10-sharpen/index.html" class="btn-nav">锐化 →</a>
  </div>
</main>
</body>
</html>
