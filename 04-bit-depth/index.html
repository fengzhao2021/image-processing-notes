<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>位深 · 图像处理知识库</title>
<link rel="stylesheet" href="../assets/style.css">
<style>
.card::before{background:var(--c4);}
.section h2{color:var(--c4);}
.bit-compare{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:20px 0;}
.bit-box{background:var(--surface);border:1px solid var(--border2);border-radius:2px;padding:18px;text-align:center;}
.bit-num{font-family:'JetBrains Mono',monospace;font-size:28px;font-weight:500;color:var(--c4);margin-bottom:6px;}
.bit-range{font-size:12px;color:var(--muted2);margin-bottom:4px;}
.bit-use{font-size:11px;color:var(--muted);margin-top:6px;}
.compress-flow{
  display:flex;align-items:center;gap:10px;
  margin:20px 0;flex-wrap:wrap;
}
.flow-box{
  background:var(--surface);border:1px solid var(--border2);
  border-radius:2px;padding:12px 16px;text-align:center;flex:1;min-width:100px;
}
.flow-val{font-family:'JetBrains Mono',monospace;font-size:18px;color:var(--c4);}
.flow-label{font-size:10px;color:var(--muted2);margin-top:4px;}
.flow-arrow{color:var(--muted);font-size:18px;}
</style>
</head>
<body>
<nav class="nav">
  <a href="../index.html" class="nav-home">知识库主页</a>
  <div class="nav-sep"></div>
  <div class="nav-title">Layer 01 · 数字图像的本质</div>
</nav>
<main class="main">
  <div class="page-header">
    <div class="page-eyebrow">LAYER 01 · 04 · BIT DEPTH</div>
    <h1 class="page-title"><em>位深</em></h1>
    <p class="page-desc">bit 是什么，8/14/16bit 的实际差异，索尼 ARW 的量化压缩特性，以及为什么 RAW 后期空间比 JPEG 大。</p>
    <div class="page-header-line"></div>
  </div>

  <div class="section">
    <div class="section-label">BIT BASICS</div>
    <h2>bit 是计算机的最小单位</h2>
    <p>一个 bit 只能存两个值：0 或 1。n 个 bit 能表示 2 的 n 次方种状态。位深就是用几个 bit 来描述一个像素的亮度。</p>
    <div class="bit-compare">
      <div class="bit-box">
        <div class="bit-num">8<span style="font-size:14px">bit</span></div>
        <div class="bit-range">0 ~ 255</div>
        <div class="bit-range" style="color:var(--c4)">256 个亮度级别</div>
        <div class="bit-use">JPEG / 屏幕显示</div>
      </div>
      <div class="bit-box">
        <div class="bit-num">14<span style="font-size:14px">bit</span></div>
        <div class="bit-range">0 ~ 16383</div>
        <div class="bit-range" style="color:var(--c4)">16384 个亮度级别</div>
        <div class="bit-use">索尼传感器原始</div>
      </div>
      <div class="bit-box">
        <div class="bit-num">16<span style="font-size:14px">bit</span></div>
        <div class="bit-range">0 ~ 65535</div>
        <div class="bit-range" style="color:var(--c4)">65536 个亮度级别</div>
        <div class="bit-use">专业后期 TIFF</div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-label">WHY IT MATTERS</div>
    <h2>格子越多，后期空间越大</h2>
    <p>调色本质是把一部分格子拉伸到更大的范围。8bit 只有 256 个格子，大幅提亮暗部时，有限的格子被拉伸开来，相邻格子之间出现明显跳跃，产生<strong>色调分离（Banding）</strong>。16bit 有 65536 个格子，同样的拉伸操作，格子依然足够密，过渡依然平滑。</p>
    <div class="insight">
      <div class="insight-label">实际例子</div>
      <p>天空从蓝到橙的渐变，在 8bit 下可能只有 30 个格子描述这段过渡，肉眼能看到一圈一圈的色带。16bit 下同样这段渐变有 7680 个格子可用，过渡完全平滑，肉眼看不出分层。</p>
    </div>
  </div>

  <div class="section">
    <div class="section-label">SONY ARW QUANTIZATION</div>
    <h2>索尼 ARW 的量化压缩</h2>
    <p>索尼 ARW 不是纯无损压缩，而是<strong>有损量化 + 无损编码</strong>。量化步长约 384，导致实际只保留约 7729 种亮度值。</p>

    <div class="compress-flow">
      <div class="flow-box">
        <div class="flow-val">65536</div>
        <div class="flow-label">理论亮度种类</div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-box">
        <div class="flow-val">7729</div>
        <div class="flow-label">实际亮度种类</div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-box">
        <div class="flow-val">55MB</div>
        <div class="flow-label">理论文件大小</div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-box">
        <div class="flow-val">33MB</div>
        <div class="flow-label">实际文件大小</div>
      </div>
    </div>

    <div class="data-box">
      <div class="data-label">亲测实验 · 16bit 亮度值分布</div>
      <pre>
亮度值     0 →  8,125,990 个像素  （步长384的量化特征）
亮度值   384 →    703,886 个像素
亮度值   768 →    841,226 个像素
亮度值  1152 →  1,134,874 个像素

特征：亮度值不连续，以384为步长跳跃
原因：索尼有损量化，牺牲部分精度换取文件缩小40%
影响：对普通摄影几乎无感，对天文摄影暗部细节有影响</pre>
    </div>
  </div>

  <div class="section">
    <div class="section-label">FILE SIZE</div>
    <h2>为什么 ARW 不同场景大小不同</h2>
    <p>无损压缩利用相邻像素差值小的规律，场景越简单（纯色天空）压缩率越高，场景越复杂（树叶细节）压缩率越低，文件越大。</p>
    <div class="data-box">
      <div class="data-label">亲测对比实验</div>
      <pre>
花卉（复杂场景）：35.1 MB
白纸（简单场景）：34.2 MB
镜头盖（纯黑）：  33.9 MB

差异不大的原因：传感器暗电流噪声填充了"空白"
即使纯黑场景，相邻像素也有随机噪点差值，无法完美压缩</pre>
    </div>
  </div>

  <div class="resources">
    <div class="resources-header"><h2>推荐学习资料</h2></div>
    <div class="resource-grid">
      <a href="https://www.cambridgeincolour.com/tutorials/bit-depth.htm" target="_blank" class="resource-item">
        <div class="resource-type">教程 · CAMBRIDGE IN COLOUR</div>
        <div class="resource-title">Understanding Bit Depth</div>
        <div class="resource-desc">最直观的位深教程，有大量对比图示说明 8bit vs 16bit 的实际差异</div>
      </a>
      <a href="https://helpx.adobe.com/photoshop/using/bit-depth.html" target="_blank" class="resource-item">
        <div class="resource-type">官方文档 · ADOBE</div>
        <div class="resource-title">Bit depth in Photoshop</div>
        <div class="resource-desc">Adobe 官方解释位深对后期处理的影响</div>
      </a>
    </div>
  </div>

  <div class="bottom-nav">
    <a href="../03-color/index.html" class="btn-nav">← 颜色的来源</a>
    <a href="../05-histogram/index.html" class="btn-nav">直方图 →</a>
  </div>
</main>
</body>
</html>
